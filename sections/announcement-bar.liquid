{%- for block in section.blocks -%}
    {%- case block.type -%}
        {%- when 'announcement' -%}
            <div class="announcebar announcebar1" style="background-color: {{ block.settings.announcement_background }}">
                <h3 style="color: {{ block.settings.announcement_text_color }};" aria-label="{{ 'sections.header.announcement' | t }}" {{ block.shopify_attributes }}>{{ block.settings.announcement_text }}</h3>
                {%- if block.settings.text != blank -%}
                    {%- if block.settings.link != blank -%}
                        <a href="{{ block.settings.link }}">
                    {%- endif -%}
                    {{ block.settings.announcement_text | escape }}
                    {%- if block.settings.link != blank -%}
                        </a>
                    {%- endif -%}
                {%- endif -%}
            </div>
    {%- endcase -%}
{%- endfor -%}

{% schema %}
{
    "name": "t:sections.announcement-bar.name",
    "max_blocks": 12,
    "blocks": [
        {
            "type": "announcement",
            "name": "t:sections.announcement-bar.blocks.announcement.name",
            "settings": [
                {
                    "type": "text",
                    "id": "announcement_text",
                    "default": "Welcome to our store",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.text.label"
                },
                {
                    "type": "color",
                    "id": "announcement_background",
                    "label": "Announcement Background Color",
                    "default": "#800080"
                },
                {
                    "type": "color",
                    "id": "announcement_text_color",
                    "label": "Announcement Text Color",
                    "default": "#fff"
                },
                {
                    "type": "url",
                    "id": "link",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.link.label"
                }
            ]
        }
    ],
    "default": {
        "blocks": [
            {
                "type": "announcement"
            }
        ]
    }
}
{% endschema %}